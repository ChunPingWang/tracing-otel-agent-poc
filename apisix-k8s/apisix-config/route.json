[
  {
    "id": "1",
    "name": "order-api-route",
    "desc": "Order API with blue-green traffic split",
    "uri": "/api/*",
    "methods": ["GET", "POST", "PUT", "DELETE"],
    "upstream_id": "1",
    "plugins": {
      "traffic-split": {
        "rules": [
          {
            "match": [
              {
                "vars": [["http_X-Canary", "==", "true"]]
              }
            ],
            "weighted_upstreams": [
              { "upstream_id": "2", "weight": 1 }
            ]
          },
          {
            "weighted_upstreams": [
              { "upstream_id": "2", "weight": 0 },
              { "weight": 100 }
            ]
          }
        ]
      }
    }
  },
  {
    "id": "2",
    "name": "payment-admin-route",
    "desc": "Payment service admin endpoint (simulate-delay)",
    "uri": "/payment/*",
    "methods": ["GET", "POST"],
    "upstream_id": "3",
    "plugins": {
      "proxy-rewrite": {
        "regex_uri": ["^/payment/(.*)", "/api/$1"]
      }
    }
  },
  {
    "id": "3",
    "name": "notification-admin-route",
    "desc": "Notification service admin endpoint (simulate-failure)",
    "uri": "/notification/*",
    "methods": ["GET", "POST"],
    "upstream_id": "4",
    "plugins": {
      "proxy-rewrite": {
        "regex_uri": ["^/notification/(.*)", "/api/$1"]
      }
    }
  }
]
